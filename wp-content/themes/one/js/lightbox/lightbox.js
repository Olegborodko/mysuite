!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(w){"use strict";function n(e,t,n,s){var i,r={raw:{}};for(i in s=s||{})s.hasOwnProperty(i)&&("classes"===e?(r.raw[s[i]]=t+"-"+s[i],r[s[i]]="."+t+"-"+s[i]):(r.raw[i]=s[i],r[i]=s[i]+"."+t));for(i in n)n.hasOwnProperty(i)&&(r[i]="classes"===e?(r.raw[i]=n[i].replace(/{ns}/g,t),n[i].replace(/{ns}/g,"."+t)):(r.raw[i]=n[i].replace(/.{ns}/g,""),n[i].replace(/{ns}/g,t)));return r}function e(){m.windowWidth=m.$window.width(),m.windowHeight=m.$window.height(),f=u.startTimer(f,p,t)}function t(){for(var e in m.ResizeHandlers)m.ResizeHandlers.hasOwnProperty(e)&&m.ResizeHandlers[e].callback.call(window,m.windowWidth,m.windowHeight)}function s(e,t){return parseInt(e.priority)-parseInt(t.priority)}var i,r,o,a="undefined"!=typeof window?window:this,c=a.document,l=function(){this.Version="@version",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=a,this.$window=w(a),this.document=c,this.$document=w(c),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},u={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(e){}},killGesture:function(e){try{e.preventDefault()}catch(e){}},lockViewport:function(e){h[e]=!0,w.isEmptyObject(h)||v||(i.length?i.attr("content",o):i=w("head").append('<meta name="viewport" content="'+o+'">'),m.$body.on(y.gestureChange,u.killGesture).on(y.gestureStart,u.killGesture).on(y.gestureEnd,u.killGesture),v=!0)},unlockViewport:function(e){"undefined"!==w.type(h[e])&&delete h[e],w.isEmptyObject(h)&&v&&(i.length&&(r?i.attr("content",r):i.remove()),m.$body.off(y.gestureChange).off(y.gestureStart).off(y.gestureEnd),v=!1)},startTimer:function(e,t,n,s){return u.clearTimer(e),s?setInterval(n,t):setTimeout(n,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(e,10)-parseInt(t,10)},sortDesc:function(e,t){return parseInt(t,10)-parseInt(e,10)},decodeEntities:function(e){var t=m.document.createElement("textarea");return t.innerHTML=e,t.value},parseQueryString:function(e){for(var t={},n=e.slice(e.indexOf("?")+1).split("&"),s=0;s<n.length;s++){var i=n[s].split("=");t[i[0]]=i[1]}return t}},m=new l,d=w.Deferred(),g={base:"{ns}",element:"{ns}-element"},y={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",gestureChange:"gesturechange.{ns}",gestureStart:"gesturestart.{ns}",gestureEnd:"gestureend.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"},f=null,p=20,h=[],v=!1;return l.prototype.NoConflict=function(){for(var e in m.DontConflict=!0,m.Plugins)m.Plugins.hasOwnProperty(e)&&(w[e]=m.Conflicts[e],w.fn[e]=m.Conflicts.fn[e])},l.prototype.Ready=function(e){"complete"===m.document.readyState||"loading"!==m.document.readyState&&!m.document.documentElement.doScroll?e():m.document.addEventListener("DOMContentLoaded",e)},l.prototype.Plugin=function(e,t){return m.Plugins[e]=function(d,f){function p(e){return e.data(h)}var e="fs-"+d,h="fs"+d.replace(/(^|\s)([a-z])/g,function(e,t,n){return t+n.toUpperCase()});return f.initialized=!1,f.priority=f.priority||10,f.classes=n("classes",e,g,f.classes),f.events=n("events",d,y,f.events),f.functions=w.extend({getData:p,iterate:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=0,s=this.length;n<s;n++){var i=this.eq(n),r=p(i)||{};"undefined"!==w.type(r.$el)&&e.apply(i,[r].concat(t))}return this}},u,f.functions),f.methods=w.extend(!0,{_construct:w.noop,_postConstruct:w.noop,_destruct:w.noop,_resize:!1,destroy:function(e){f.functions.iterate.apply(this,[f.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(f.classes.raw.element).removeData(h)}},f.methods),f.utilities=w.extend(!0,{_initialize:!1,_delegate:!1,defaults:function(e){f.defaults=w.extend(!0,f.defaults,e||{})}},f.utilities),f.widget&&(m.Conflicts.fn[d]=w.fn[d],w.fn[h]=function(e){if(this instanceof w){var t=f.methods[e];if("object"===w.type(e)||!e)return function(e){var t,n,s,i="object"===w.type(e),r=Array.prototype.slice.call(arguments,i?1:0),o=w();for(e=w.extend(!0,{},f.defaults||{},i?e:{}),n=0,s=this.length;n<s;n++)if(!p(t=this.eq(n))){f.guid++;var a="__"+f.guid,c=f.classes.raw.base+a,l=t.data(d+"-options"),u=w.extend(!0,{$el:t,guid:a,numGuid:f.guid,rawGuid:c,dotGuid:"."+c},e,"object"===w.type(l)?l:{});t.addClass(f.classes.raw.element).data(h,u),f.methods._construct.apply(t,[u].concat(r)),o=o.add(t)}for(n=0,s=o.length;n<s;n++)t=o.eq(n),f.methods._postConstruct.apply(t,[p(t)]);return this}.apply(this,arguments);if(t&&0!==e.indexOf("_")){var n=[t].concat(Array.prototype.slice.call(arguments,1));return f.functions.iterate.apply(this,n)}return this}},m.DontConflict||(w.fn[d]=w.fn[h])),m.Conflicts[d]=w[d],w[h]=f.utilities._delegate||function(e){var t=f.utilities[e]||f.utilities._initialize||!1;if(t){var n=Array.prototype.slice.call(arguments,"object"===w.type(e)?0:1);return t.apply(window,n)}},m.DontConflict||(w[d]=w[h]),f.namespace=d,f.namespaceClean=h,f.guid=0,f.methods._resize&&(m.ResizeHandlers.push({namespace:d,priority:f.priority,callback:f.methods._resize}),m.ResizeHandlers.sort(s)),f.methods._raf&&(m.RAFHandlers.push({namespace:d,priority:f.priority,callback:f.methods._raf}),m.RAFHandlers.sort(s)),f}(e,t),m.Plugins[e]},m.$window.on("resize.fs",e),e(),function e(){if(m.support.raf)for(var t in m.window.requestAnimationFrame(e),m.RAFHandlers)m.RAFHandlers.hasOwnProperty(t)&&m.RAFHandlers[t].callback.call(window)}(),m.Ready(function(){m.$body=w("body"),w("html").addClass(m.support.touch?"touchevents":"no-touchevents"),i=w('meta[name="viewport"]'),r=!!i.length&&i.attr("content"),o="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",d.resolve()}),y.clickTouchStart=y.click+" "+y.touchStart,function(){var e,t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},n=["transition","-webkit-transition"],s={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},i="transitionend",r="",o="",a=document.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in a.style){i=t[e],m.support.transition=!0;break}for(e in y.transitionEnd=i+".{ns}",n)if(n.hasOwnProperty(e)&&n[e]in a.style){r=n[e];break}for(e in m.transition=r,s)if(s.hasOwnProperty(e)&&s[e]in a.style){m.support.transform=!0,o=s[e];break}m.transform=o}(),window.Formstone=m});
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./touch","./transition","./viewer"],t):t(jQuery,Formstone)}(function(f,w){"use strict";function e(t){if(!F){var i=t.data;!0===i.overlay&&(i.mobile=!0),(F=f.extend({},{visible:!1,gallery:{active:!1},isMobile:w.isMobile||i.mobile,isTouch:w.support.touch,isAnimating:!0,isZooming:!1,oldContentHeight:0,oldContentWidth:0,metaHeight:0,thumbnailHeight:0,captionOpen:!1,thumbnailsOpen:!1,tapTimer:null},i)).isViewer=F.isMobile&&i.viewer&&void 0!==f.fn.fsViewer;var e=i.$el,o=i.$object,n=e&&e[0].href&&e[0].href||"",a=e&&e[0].hash&&e[0].hash||"",l=(n.toLowerCase().split(".").pop().split(/\#|\?/),e?e.data(O+"-type"):""),r="image"===l||n.match(i.fileTypes)||"data:image"===n.substr(0,10),g=z(n),s="url"===l||!r&&!g&&"http"===n.substr(0,4)&&!a,d="element"===l||!r&&!g&&!s&&"#"===a.substr(0,1),h=void 0!==o;if(d&&(n=a),!(r||g||s||d||h))return void(F=null);if(R.killEvent(t),F.margin*=2,F.type=r?"image":g?"video":"element",r||g){var c=e.data(O+"-gallery");c&&(F.gallery.active=!0,F.gallery.id=c,F.gallery.$items=f("a[data-lightbox-gallery= "+F.gallery.id+"], a[rel= "+F.gallery.id+"]"),F.gallery.index=F.gallery.$items.index(F.$el),F.gallery.total=F.gallery.$items.length-1)}F.thumbnails&&(r||g)&&F.gallery.active||(F.thumbnails=!1);var m="";F.isMobile||(m+='<div class="'+[q.overlay,F.theme,F.customClass].join(" ")+'"></div>');var p=[q.base,q.loading,q.animating,F.theme,F.customClass];if(F.fixed&&p.push(q.fixed),F.isMobile&&p.push(q.mobile),F.isTouch&&p.push(q.touch),s&&p.push(q.iframed),(d||h)&&p.push(q.inline),F.thumbnails&&p.push(q.thumbnailed),F.labels.lightbox=F.labels.lightbox.replace("{guid}",i.numGuid),m+='<div class="'+p.join(" ")+'" role="dialog" aria-label="'+F.labels.lightbox+'" tabindex="-1">',m+='<button type="button" class="'+q.close+'">'+F.labels.close+"</button>",m+='<span class="'+q.loading_icon+'"></span>',m+='<div class="'+q.container+'">',F.gallery.active&&F.thumbnails){m+='<div class="'+[q.thumbnails]+'">',m+='<div class="'+[q.thumbnail_container]+'">';for(var u,b,v=0,H=F.gallery.$items.length;v<H;v++)(b=(u=F.gallery.$items.eq(v)).data("lightbox-thumbnail"))||(b=u.find("img").attr("src")),m+='<button class="'+[q.thumbnail_item]+'">',m+='<img src="'+b+'" alt="">',m+="</button>";m+="</div></div>"}m+='<div class="'+q.content+'"></div>',(r||g)&&(m+='<div class="'+q.tools+'">',m+='<div class="'+q.controls+'">',F.gallery.active&&(m+='<button type="button" class="'+[q.control,q.control_previous].join(" ")+'">'+F.labels.previous+"</button>",m+='<button type="button" class="'+[q.control,q.control_next].join(" ")+'">'+F.labels.next+"</button>"),F.isMobile&&F.isTouch&&(m+='<button type="button" class="'+[q.toggle,q.caption_toggle].join(" ")+'">'+F.labels.captionClosed+"</button>",F.gallery.active&&F.thumbnails&&(m+='<button type="button" class="'+[q.toggle,q.thumbnail_toggle].join(" ")+'">'+F.labels.thumbnailsClosed+"</button>")),m+="</div>",m+='<div class="'+q.meta+'">',m+='<div class="'+q.meta_content+'">',F.gallery.active&&(m+='<p class="'+q.position+'"',F.gallery.total<1&&(m+=' style="display: none;"'),m+=">",m+='<span class="'+q.position_current+'">'+(F.gallery.index+1)+"</span> ",m+=F.labels.count,m+=' <span class="'+q.position_total+'">'+(F.gallery.total+1)+"</span>",m+="</p>"),m+='<div class="'+q.caption+'">',m+=F.formatter.call(e,i),m+="</div></div></div>",m+="</div>"),m+="</div></div>",B.append(m),F.$overlay=f(P.overlay),F.$lightbox=f(P.base),F.$close=f(P.close),F.$container=f(P.container),F.$content=f(P.content),F.$tools=f(P.tools),F.$meta=f(P.meta),F.$metaContent=f(P.meta_content),F.$position=f(P.position),F.$caption=f(P.caption),F.$controlBox=f(P.controls),F.$controls=f(P.control),F.$thumbnails=f(P.thumbnails),F.$thumbnailContainer=f(P.thumbnail_container),F.$thumbnailItems=f(P.thumbnail_item),F.isMobile?(F.paddingVertical=F.$close.outerHeight(),F.paddingHorizontal=0,F.mobilePaddingVertical=parseInt(F.$content.css("paddingTop"),10)+parseInt(F.$content.css("paddingBottom"),10),F.mobilePaddingHorizontal=parseInt(F.$content.css("paddingLeft"),10)+parseInt(F.$content.css("paddingRight"),10)):(F.paddingVertical=parseInt(F.$lightbox.css("paddingTop"),10)+parseInt(F.$lightbox.css("paddingBottom"),10),F.paddingHorizontal=parseInt(F.$lightbox.css("paddingLeft"),10)+parseInt(F.$lightbox.css("paddingRight"),10),F.mobilePaddingVertical=0,F.mobilePaddingHorizontal=0),F.contentHeight=F.$lightbox.outerHeight()-F.paddingVertical,F.contentWidth=F.$lightbox.outerWidth()-F.paddingHorizontal,F.controlHeight=F.$controls.outerHeight(),$=y(),F.$lightbox.css({top:F.fixed?0:$.top}),F.gallery.active&&(F.$lightbox.addClass(q.has_controls),M()),A.on(E.keyDown,k),B.on(E.click,[P.overlay,P.close].join(", "),W).on([E.focus,E.focusIn].join(" "),L),F.gallery.active&&F.$lightbox.on(E.click,P.control,V),F.thumbnails&&F.$lightbox.on(E.click,P.thumbnail_item,T),F.isMobile&&F.isTouch&&F.$lightbox.on(E.click,P.caption_toggle,x).on(E.click,P.thumbnail_toggle,C),F.$lightbox.fsTransition({property:"opacity"},function(){var t,i;r?_(n):g?I(n):s?(i=n,i+=-1<i.indexOf("?")?"&"+F.requestKey+"=true":"?"+F.requestKey+"=true",j(f('<iframe class="'+q.iframe+'" src="'+i+'"></iframe>'))):d?(t=n,F.$inlineTarget=f(t),F.$inlineContents=F.$inlineTarget.children().detach(),j(F.$inlineContents)):h&&j(F.$object)}).addClass(q.open),F.$overlay.addClass(q.open)}var $}function t(t){"object"!=typeof t&&(F.targetHeight=t,F.targetWidth=arguments[1]),"element"===F.type?d(F.$content.find("> :first-child")):"image"===F.type?l():"video"===F.type&&r(),function(){if(F.visible&&!F.isMobile){var t=y();F.$controls.css({marginTop:(F.contentHeight-F.controlHeight-F.metaHeight+F.thumbnailHeight)/2}),F.$lightbox.css({height:F.contentHeight+F.paddingVertical,width:F.contentWidth+F.paddingHorizontal,top:F.fixed?0:t.top}),F.oldContentHeight=F.contentHeight,F.oldContentWidth=F.contentWidth}}()}function W(t){R.killEvent(t),F&&(F.$lightbox.fsTransition("destroy"),F.$content.fsTransition("destroy"),F.$lightbox.addClass(q.animating).fsTransition({property:"opacity"},function(t){void 0!==F.$inlineTarget&&F.$inlineTarget.length&&F.$inlineTarget.append(F.$inlineContents.detach()),F.isViewer&&F.$imageContainer&&F.$imageContainer.length&&F.$imageContainer.fsViewer("destroy"),F.$lightbox.off(E.namespace),F.$container.off(E.namespace),A.off(E.keyDown),B.off(E.namespace),B.off(E.namespace),F.$overlay.remove(),F.$lightbox.remove(),void 0!==F.$el&&F.$el&&F.$el.length&&F.$el.focus(),F=null,A.trigger(E.close)}),F.$lightbox.removeClass(q.open),F.$overlay.removeClass(q.open),F.isMobile&&(u.removeClass(q.lock),R.unlockViewport(O)))}function n(){var t=y();F.isMobile||F.duration,F.isMobile?R.lockViewport(O):F.$controls.css({marginTop:(F.contentHeight-F.controlHeight-F.metaHeight+F.thumbnailHeight)/2}),""===F.$caption.html()?(F.$caption.hide(),F.$lightbox.removeClass(q.has_caption),F.gallery.active||F.$tools.hide()):(F.$caption.show(),F.$lightbox.addClass(q.has_caption)),F.$lightbox.fsTransition({property:F.contentHeight!==F.oldContentHeight?"height":"width"},function(){var t;F.$content.fsTransition({property:"opacity"},function(){F.$lightbox.removeClass(q.animating),F.isAnimating=!1}),F.$lightbox.removeClass(q.loading).addClass(q.ready),F.visible=!0,A.trigger(E.open),F.gallery.active&&(t="",0<F.gallery.index&&(z(t=F.gallery.$items.eq(F.gallery.index-1).attr("href"))||f('<img src="'+t+'">')),F.gallery.index<F.gallery.total&&(z(t=F.gallery.$items.eq(F.gallery.index+1).attr("href"))||f('<img src="'+t+'">')),g(),function(){if(F.thumbnails){var t=F.$thumbnailItems.eq(F.gallery.index),i=t.position().left+t.outerWidth(!1)/2-F.$thumbnailContainer.outerWidth(!0)/2;F.$thumbnailContainer.stop().animate({scrollLeft:i},200,"linear")}}()),F.$lightbox.focus()}),F.isMobile||F.$lightbox.css({height:F.contentHeight+F.paddingVertical,width:F.contentWidth+F.paddingHorizontal,top:F.fixed?0:t.top});var i=F.oldContentHeight!==F.contentHeight||F.oldContentWidth!==F.contentWidth;!F.isMobile&&i||F.$lightbox.fsTransition("resolve"),F.oldContentHeight=F.contentHeight,F.oldContentWidth=F.contentWidth,F.isMobile&&u.addClass(q.lock)}function y(){if(F.isMobile)return{left:0,top:0};var t={left:(w.windowWidth-F.contentWidth-F.paddingHorizontal)/2,top:F.top<=0?(w.windowHeight-F.contentHeight-F.paddingVertical)/2:F.top};return!0!==F.fixed&&(t.top+=A.scrollTop()),t}function x(t){if(R.killEvent(t),F.captionOpen)o();else{a();var i=parseInt(F.$metaContent.outerHeight(!0));i+=parseInt(F.$meta.css("padding-top")),i+=parseInt(F.$meta.css("padding-bottom")),F.$meta.css({height:i}),F.$lightbox.addClass(q.caption_open).find(P.caption_toggle).text(F.labels.captionOpen),F.captionOpen=!0}}function o(){F.$lightbox.removeClass(q.caption_open).find(P.caption_toggle).text(F.labels.captionClosed),F.captionOpen=!1}function C(t){R.killEvent(t),F.thumbnailsOpen?a():(o(),F.$lightbox.addClass(q.thumbnails_open).find(P.thumbnail_toggle).text(F.labels.thumbnailsOpen),F.thumbnailsOpen=!0)}function a(){F.$lightbox.removeClass(q.thumbnails_open).find(P.thumbnail_toggle).text(F.labels.thumbnailsClosed),F.thumbnailsOpen=!1}function _(t){F.isViewer?(F.$imageContainer=f('<div class="'+q.image_container+'"><img></div>'),F.$image=F.$imageContainer.find("img"),F.$image.attr("src",t).addClass(q.image),F.$content.prepend(F.$imageContainer),l(),F.$imageContainer.one("loaded.viewer",function(){n()}).fsViewer({theme:F.theme})):(F.$imageContainer=f('<div class="'+q.image_container+'"><img></div>'),F.$image=F.$imageContainer.find("img"),F.$image.one(E.load,function(){var t,i,e,o=(t=F.$image,i=t[0],e=new Image,void 0!==i.naturalHeight?{naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth}:"img"===i.tagName.toLowerCase()&&(e.src=i.src,{naturalHeight:e.height,naturalWidth:e.width}));F.naturalHeight=o.naturalHeight,F.naturalWidth=o.naturalWidth,F.retina&&(F.naturalHeight/=2,F.naturalWidth/=2),F.$content.prepend(F.$imageContainer),l(),n()}).on(E.error,h).attr("src",t).addClass(q.image),(F.$image[0].complete||4===F.$image[0].readyState)&&F.$image.trigger(E.load))}function l(){if(F.$image){var t=0;for(F.windowHeight=F.viewportHeight=w.windowHeight-F.mobilePaddingVertical-F.paddingVertical,F.windowWidth=F.viewportWidth=w.windowWidth-F.mobilePaddingHorizontal-F.paddingHorizontal,F.contentHeight=1/0,F.contentWidth=1/0,F.imageMarginTop=0,F.imageMarginLeft=0;F.contentHeight>F.viewportHeight&&t<2;)F.imageHeight=0===t?F.naturalHeight:F.$image.outerHeight(),F.imageWidth=0===t?F.naturalWidth:F.$image.outerWidth(),F.metaHeight=0===t?0:F.metaHeight,F.spacerHeight=0===t?0:F.spacerHeight,F.thumbnailHeight=0===t?0:F.thumbnailHeight,0===t&&(F.ratioHorizontal=F.imageHeight/F.imageWidth,F.ratioVertical=F.imageWidth/F.imageHeight,F.isWide=F.imageWidth>F.imageHeight),F.imageHeight<F.minHeight&&(F.minHeight=F.imageHeight),F.imageWidth<F.minWidth&&(F.minWidth=F.imageWidth),F.isMobile?(F.isTouch?(F.$controlBox.css({width:w.windowWidth}),F.spacerHeight=F.$controls.outerHeight(!0)):(F.$tools.css({width:w.windowWidth}),F.spacerHeight=F.$tools.outerHeight(!0)),F.contentHeight=F.viewportHeight,F.contentWidth=F.viewportWidth,F.isTouch||F.$content.css({height:F.contentHeight-F.spacerHeight}),F.$thumbnails.length&&(F.spacerHeight+=F.$thumbnails.outerHeight(!0)),F.spacerHeight+=10,i(),F.imageMarginTop=(F.contentHeight-F.targetImageHeight-F.spacerHeight)/2,F.imageMarginLeft=(F.contentWidth-F.targetImageWidth)/2):(0===t&&(F.viewportHeight-=F.margin+F.paddingVertical,F.viewportWidth-=F.margin+F.paddingHorizontal),F.viewportHeight-=F.metaHeight,F.thumbnails&&(F.viewportHeight-=F.thumbnailHeight),i(),F.contentHeight=F.targetImageHeight,F.contentWidth=F.targetImageWidth),F.isMobile||F.isTouch||F.$meta.css({width:F.contentWidth}),F.$image.css({height:F.targetImageHeight,width:F.targetImageWidth,marginTop:F.imageMarginTop,marginLeft:F.imageMarginLeft}),F.isMobile||(F.metaHeight=F.$meta.outerHeight(!0),F.contentHeight+=F.metaHeight),F.thumbnails&&(F.thumbnailHeight=F.$thumbnails.outerHeight(!0),F.contentHeight+=F.thumbnailHeight),t++}}function i(){var t=F.isMobile?F.contentHeight-F.spacerHeight:F.viewportHeight,i=F.isMobile?F.contentWidth:F.viewportWidth;F.isWide?(F.targetImageWidth=i,F.targetImageHeight=F.targetImageWidth*F.ratioHorizontal,F.targetImageHeight>t&&(F.targetImageHeight=t,F.targetImageWidth=F.targetImageHeight*F.ratioVertical)):(F.targetImageHeight=t,F.targetImageWidth=F.targetImageHeight*F.ratioVertical,F.targetImageWidth>i&&(F.targetImageWidth=i,F.targetImageHeight=F.targetImageWidth*F.ratioHorizontal)),(F.targetImageWidth>F.imageWidth||F.targetImageHeight>F.imageHeight)&&(F.targetImageHeight=F.imageHeight,F.targetImageWidth=F.imageWidth),(F.targetImageWidth<F.minWidth||F.targetImageHeight<F.minHeight)&&(F.targetImageWidth<F.minWidth?(F.targetImageWidth=F.minWidth,F.targetImageHeight=F.targetImageWidth*F.ratioHorizontal):(F.targetImageHeight=F.minHeight,F.targetImageWidth=F.targetImageHeight*F.ratioVertical))}function I(t){var i=z(t),e=t.split("?");i?(2<=e.length&&(i+="?"+e.slice(1)[0].trim()),F.$videoWrapper=f('<div class="'+q.video_wrapper+'"></div>'),F.$video=f('<iframe class="'+q.video+'" frameborder="0" seamless="seamless" allowfullscreen></iframe>'),F.$video.attr("src",i).addClass(q.video).prependTo(F.$videoWrapper),F.$content.prepend(F.$videoWrapper),r(),n()):h()}function r(){F.windowHeight=F.viewportHeight=w.windowHeight-F.mobilePaddingVertical-F.paddingVertical,F.windowWidth=F.viewportWidth=w.windowWidth-F.mobilePaddingHorizontal-F.paddingHorizontal,F.videoMarginTop=0,F.videoMarginLeft=0,F.isMobile?(F.isTouch?(F.$controlBox.css({width:w.windowWidth}),F.spacerHeight=F.$controls.outerHeight(!0)+10):(F.$tools.css({width:w.windowWidth}),F.spacerHeight=F.$tools.outerHeight(!0),F.spacerHeight+=F.$thumbnails.outerHeight(!0)+10),F.viewportHeight-=F.spacerHeight,F.targetVideoWidth=F.viewportWidth,F.targetVideoHeight=F.targetVideoWidth*F.videoRatio,F.targetVideoHeight>F.viewportHeight&&(F.targetVideoHeight=F.viewportHeight,F.targetVideoWidth=F.targetVideoHeight/F.videoRatio),F.videoMarginTop=(F.viewportHeight-F.targetVideoHeight)/2,F.videoMarginLeft=(F.viewportWidth-F.targetVideoWidth)/2):(F.viewportHeight=F.windowHeight-F.margin,F.viewportWidth=F.windowWidth-F.margin,F.targetVideoWidth=F.videoWidth>F.viewportWidth?F.viewportWidth:F.videoWidth,F.targetVideoWidth<F.minWidth&&(F.targetVideoWidth=F.minWidth),F.targetVideoHeight=F.targetVideoWidth*F.videoRatio,F.contentHeight=F.targetVideoHeight,F.contentWidth=F.targetVideoWidth),F.isMobile||F.isTouch||F.$meta.css({width:F.contentWidth}),F.$videoWrapper.css({height:F.targetVideoHeight,width:F.targetVideoWidth,marginTop:F.videoMarginTop,marginLeft:F.videoMarginLeft}),F.isMobile||(F.metaHeight=F.$meta.outerHeight(!0),F.contentHeight+=F.metaHeight),F.thumbnails&&(F.thumbnailHeight=F.$thumbnails.outerHeight(!0),F.contentHeight+=F.thumbnailHeight)}function V(t){R.killEvent(t);var i=f(t.currentTarget);F.isAnimating||i.hasClass(q.control_disabled)||(F.isAnimating=!0,o(),F.gallery.index+=i.hasClass(q.control_next)?1:-1,F.gallery.index>F.gallery.total&&(F.gallery.index=F.infinite?0:F.gallery.total),F.gallery.index<0&&(F.gallery.index=F.infinite?F.gallery.total:0),g(),F.$lightbox.addClass(q.animating),F.$content.fsTransition({property:"opacity"},s),F.$lightbox.addClass(q.loading))}function T(t){R.killEvent(t);var i=f(t.currentTarget);F.isAnimating||i.hasClass(q.active)||(F.isAnimating=!0,o(),F.gallery.index=F.$thumbnailItems.index(i),g(),F.$lightbox.addClass(q.animating),F.$content.fsTransition({property:"opacity"},s),F.$lightbox.addClass(q.loading))}function g(){if(F.thumbnails){var t=F.$thumbnailItems.eq(F.gallery.index);F.$thumbnailItems.removeClass(q.active),t.addClass(q.active)}}function s(){void 0!==F.$imageContainer&&(F.isViewer&&F.$imageContainer.fsViewer("destroy"),F.$imageContainer.remove()),void 0!==F.$videoWrapper&&F.$videoWrapper.remove(),F.$el=F.gallery.$items.eq(F.gallery.index),F.$caption.html(F.formatter.call(F.$el,F)),F.$position.find(P.position_current).html(F.gallery.index+1);var t=F.$el.attr("href");z(t)?(F.type="video",I(t)):(F.type="image",_(t)),M()}function M(){F.$controls.removeClass(q.control_disabled),F.infinite||(0===F.gallery.index&&F.$controls.filter(P.control_previous).addClass(q.control_disabled),F.gallery.index===F.gallery.total&&F.$controls.filter(P.control_next).addClass(q.control_disabled))}function k(t){!F.gallery.active||37!==t.keyCode&&39!==t.keyCode?27===t.keyCode&&F.$close.trigger(E.click):(R.killEvent(t),F.$controls.filter(37===t.keyCode?P.control_previous:P.control_next).trigger(E.click))}function j(t){F.$content.append(t),d(t),n()}function d(t){F.windowHeight=w.windowHeight-F.mobilePaddingVertical-F.paddingVertical,F.windowWidth=w.windowWidth-F.mobilePaddingHorizontal-F.paddingHorizontal,F.objectHeight=t.outerHeight(!0),F.objectWidth=t.outerWidth(!0),F.targetHeight=F.targetHeight||(F.$el?F.$el.data(O+"-height"):null),F.targetWidth=F.targetWidth||(F.$el?F.$el.data(O+"-width"):null),F.maxHeight=F.windowHeight<0?F.minHeight:F.windowHeight,F.isIframe=t.is("iframe"),F.objectMarginTop=0,F.objectMarginLeft=0,F.isMobile||(F.windowHeight-=F.margin,F.windowWidth-=F.margin),F.contentHeight=F.targetHeight?F.targetHeight:F.isIframe||F.isMobile?F.windowHeight:F.objectHeight,F.contentWidth=F.targetWidth?F.targetWidth:F.isIframe||F.isMobile?F.windowWidth:F.objectWidth,(F.isIframe||F.isObject)&&F.isMobile?(F.contentHeight=F.windowHeight,F.contentWidth=F.windowWidth):F.isObject&&(F.contentHeight=F.contentHeight>F.windowHeight?F.windowHeight:F.contentHeight,F.contentWidth=F.contentWidth>F.windowWidth?F.windowWidth:F.contentWidth),F.isMobile||(F.contentHeight>F.maxHeight&&(F.contentHeight=F.maxHeight),F.contentWidth>F.maxWidth&&(F.contentWidth=F.maxWidth))}function h(){var t=f('<div class="'+q.error+'"><p>Error Loading Resource</p></div>');F.type="element",F.$tools.remove(),F.$image.off(E.namespace),j(t),A.trigger(E.error)}function z(t){var i,e=F.videoFormatter;for(var o in e)if(e.hasOwnProperty(o)&&null!==(i=t.match(e[o].pattern)))return e[o].format.call(F,i);return!1}function L(t){var i=t.target;f.contains(F.$lightbox[0],i)||i===F.$lightbox[0]||i===F.$overlay[0]||(R.killEvent(t),F.$lightbox.focus())}var c=w.Plugin("lightbox",{widget:!0,defaults:{customClass:"",fileTypes:/\.(jpg|sjpg|jpeg|png|gif)/i,fixed:!1,formatter:function(){var t=this.attr("title"),i=!(void 0===t||!t)&&t.replace(/^\s+|\s+$/g,"");return i?'<p class="caption">'+i+"</p>":""},infinite:!1,labels:{close:"Close",count:"of",next:"Next",previous:"Previous",captionClosed:"View Caption",captionOpen:"Close Caption",thumbnailsClosed:"View Thumbnails",thumbnailsOpen:"Close Thumbnails",lightbox:"Lightbox {guid}"},margin:50,maxHeight:1e4,maxWidth:1e4,minHeight:100,minWidth:100,mobile:!1,overlay:!1,retina:!1,requestKey:"fs-lightbox",theme:"fs-light",thumbnails:!1,top:0,videoFormatter:{youtube:{pattern:/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/,format:function(t){return"//www.youtube.com/embed/"+t[1]}},vimeo:{pattern:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,format:function(t){return"//player.vimeo.com/video/"+t[3]}}},videoRatio:.5625,videoWidth:800,viewer:!0},classes:["loading","animating","fixed","mobile","touch","inline","iframed","open","ready","overlay","close","loading_icon","container","content","image","image_container","video","video_wrapper","tools","meta","meta_content","controls","control","control_previous","control_next","control_disabled","position","position_current","position_total","toggle","caption_toggle","caption","caption_open","thumbnailed","thumbnails_open","thumbnail_toggle","thumbnails","thumbnail_container","thumbnail_item","active","has_controls","has_caption","iframe","error","active","lock"],events:{open:"open",close:"close"},methods:{_construct:function(t){this.on(E.click,t,e);var i=this.data(O+"-gallery");!v&&b&&i===b&&(v=!0,this.trigger(E.click))},_destruct:function(t){W(),this.off(E.namespace)},_resize:function(){F&&t()},resize:t},utilities:{_initialize:function(t,i){t instanceof f&&e.apply(p,[{data:f.extend(!0,{},{$object:t},m,i||{})}])},close:W}}),O=c.namespace,m=c.defaults,P=c.classes,q=P.raw,E=c.events,R=c.functions,p=w.window,A=w.$window,B=null,u=null,b=!1,v=!1,F=null;w.Ready(function(){B=w.$body,u=f("html, body"),b=w.window.location.hash.replace("#","")})});
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(X,s){"use strict";function o(e){e.preventManipulation&&e.preventManipulation();var t=e.data,a=e.originalEvent;if(a.type.match(/(up|end|cancel)$/i))d(e);else{if(a.pointerId){var n=!1;for(var i in t.touches)t.touches[i].id===a.pointerId&&(n=!0,t.touches[i].pageX=a.pageX,t.touches[i].pageY=a.pageY);n||t.touches.push({id:a.pointerId,pageX:a.pageX,pageY:a.pageY})}else t.touches=a.touches;a.type.match(/(down|start)$/i)?Y(e):a.type.match(/move$/i)&&p(e)}}function Y(e){var t=e.data,a="undefined"!==X.type(t.touches)&&t.touches.length?t.touches[0]:null;a&&t.$el.off(w.mouseDown),t.touching||(t.startE=e.originalEvent,t.startX=a?a.pageX:e.pageX,t.startY=a?a.pageY:e.pageY,t.startT=(new Date).getTime(),t.scaleD=1,t.passedAxis=!1),t.$links&&t.$links.off(w.click);var n=x(t.scale?w.scaleStart:w.panStart,e,t.startX,t.startY,t.scaleD,0,0,"","");if(t.scale&&t.touches&&2<=t.touches.length){var i=t.touches;t.pinch={startX:f(i[0].pageX,i[1].pageX),startY:f(i[0].pageY,i[1].pageY),startD:m(i[1].pageX-i[0].pageX,i[1].pageY-i[0].pageY)},n.pageX=t.startX=t.pinch.startX,n.pageY=t.startY=t.pinch.startY}t.touching||(t.touching=!0,t.pan&&!a&&D.on(w.mouseMove,t,p).on(w.mouseUp,t,d),s.support.pointer?D.on([w.pointerMove,w.pointerUp,w.pointerCancel].join(" "),t,o):D.on([w.touchMove,w.touchEnd,w.touchCancel].join(" "),t,o),t.$el.trigger(n))}function p(e){var t=e.data,a="undefined"!==X.type(t.touches)&&t.touches.length?t.touches[0]:null,n=a?a.pageX:e.pageX,i=a?a.pageY:e.pageY,s=n-t.startX,o=i-t.startY,p=0<s?"right":"left",c=0<o?"down":"up",r=Math.abs(s)>t.threshold,l=Math.abs(o)>t.threshold;if(!t.passedAxis&&t.axis&&(t.axisX&&l||t.axisY&&r))d(e);else{!t.passedAxis&&(!t.axis||t.axis&&t.axisX&&r||t.axisY&&l)&&(t.passedAxis=!0),t.passedAxis&&(M.killEvent(e),M.killEvent(t.startE));var u=!0,h=x(t.scale?w.scale:w.pan,e,n,i,t.scaleD,s,o,p,c);if(t.scale)if(t.touches&&2<=t.touches.length){var g=t.touches;t.pinch.endX=f(g[0].pageX,g[1].pageX),t.pinch.endY=f(g[0].pageY,g[1].pageY),t.pinch.endD=m(g[1].pageX-g[0].pageX,g[1].pageY-g[0].pageY),t.scaleD=t.pinch.endD/t.pinch.startD,h.pageX=t.pinch.endX,h.pageY=t.pinch.endY,h.scale=t.scaleD,h.deltaX=t.pinch.endX-t.pinch.startX,h.deltaY=t.pinch.endY-t.pinch.startY}else t.pan||(u=!1);u&&t.$el.trigger(h)}}function d(e){var t=e.data,a="undefined"!==X.type(t.touches)&&t.touches.length?t.touches[0]:null,n=a?a.pageX:e.pageX,i=a?a.pageY:e.pageY,s=n-t.startX,o=i-t.startY,p=(new Date).getTime(),c=t.scale?w.scaleEnd:w.panEnd,r=0<s?"right":"left",l=0<o?"down":"up",u=1<Math.abs(s),h=1<Math.abs(o);if(t.swipe&&p-t.startT<t.time&&Math.abs(s)>t.threshold&&(c=w.swipe),t.axis&&(t.axisX&&h||t.axisY&&u)||u||h){t.$links=t.$el.find("a");for(var g=0,d=t.$links.length;g<d;g++)v(t.$links.eq(g),t)}var f=x(c,e,n,i,t.scaleD,s,o,r,l);D.off([w.touchMove,w.touchEnd,w.touchCancel,w.mouseMove,w.mouseUp,w.pointerMove,w.pointerUp,w.pointerCancel].join(" ")),t.$el.trigger(f),t.touches=[],t.scale,a&&(t.touchTimer=M.startTimer(t.touchTimer,5,function(){t.$el.on(w.mouseDown,t,Y)})),t.touching=!1}function v(e,t){e.on(w.click,t,n);var a=X._data(e[0],"events").click;a.unshift(a.pop())}function n(e){M.killEvent(e,!0),e.data.$links.off(w.click)}function x(e,t,a,n,i,s,o,p,c){return X.Event(e,{originalEvent:t,bubbles:!0,pageX:a,pageY:n,scale:i,deltaX:s,deltaY:o,directionX:p,directionY:c})}function f(e,t){return(e+t)/2}function m(e,t){return Math.sqrt(e*e+t*t)}function a(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var e=!s.window.PointerEvent,t=s.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1,threshold:10,time:50},methods:{_construct:function(e){if(e.touches=[],e.touching=!1,this.on(w.dragStart,M.killEvent),e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axisX="x"===e.axis,e.axisY="y"===e.axis,s.support.pointer){var t="";!e.axis||e.axisX&&e.axisY?t="none":(e.axisX&&(t+=" pan-y"),e.axisY&&(t+=" pan-x")),a(this,t),this.on(w.pointerDown,e,o)}else this.on(w.touchStart,e,o).on(w.mouseDown,e,Y)},_destruct:function(e){this.off(w.namespace),a(this,"")}},events:{pointerDown:e?"MSPointerDown":"pointerdown",pointerUp:e?"MSPointerUp":"pointerup",pointerMove:e?"MSPointerMove":"pointermove",pointerCancel:e?"MSPointerCancel":"pointercancel"}}),w=t.events,M=t.functions,D=s.$window;w.pan="pan",w.panStart="panstart",w.panEnd="panend",w.scale="scale",w.scaleStart="scalestart",w.scaleEnd="scaleend",w.swipe="swipe"});
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core"],t):t(jQuery,Formstone)}(function(s,a){"use strict";function i(t){t.stopPropagation(),t.preventDefault();var e=t.data,r=t.originalEvent,n=e.target?e.$target:e.$el;e.property&&r.propertyName!==e.property||!s(r.target).is(n)||o(e)}function o(t){t.always||t.$el[e.namespaceClean]("destroy"),t.callback.apply(t.$el)}function c(t){var e=l(t.$check);(function(t,e){if(s.type(t)!==s.type(e))return!1;for(var r in t){if(!t.hasOwnProperty(r))return!1;if(!t.hasOwnProperty(r)||!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0})(t.styles,e)||o(t),t.styles=e}function l(t){var e,r,n,a={};if(t instanceof s&&(t=t[0]),p.getComputedStyle)for(var i=0,o=(e=p.getComputedStyle(t,null)).length;i<o;i++)r=e[i],n=e.getPropertyValue(r),a[r]=n;else if(t.currentStyle)for(r in e=t.currentStyle)a[r]=e[r];return a}var e=a.Plugin("transition",{widget:!0,defaults:{always:!1,property:null,target:null},methods:{_construct:function(t,e){if(e){t.$target=this.find(t.target),t.$check=t.target?t.$target:this,t.callback=e,t.styles=l(t.$check),t.timer=null;var r=t.$check.css(a.transition+"-duration"),n=parseFloat(r);a.support.transition&&r&&n?this.on(u.transitionEnd,t,i):t.timer=f.startTimer(t.timer,50,function(){c(t)},!0)}},_destruct:function(t){f.clearTimer(t.timer,!0),this.off(u.namespace)},resolve:o}}),u=e.events,f=e.functions,p=a.window});
!function(t){"function"==typeof define&&define.amd?define(["jquery","./core","./transition"],t):t(jQuery,Formstone)}(function(s,n){"use strict";function t(){Z.scrollTop()+n.windowHeight<0&&0}function l(){(E=s(I.base)).length?j.lockViewport(z):j.unlockViewport(z)}function m(g,t,e){g.isAnimating||(g.isAnimating=!0,g.$container=s('<div class="'+y.container+'"><img></div>'),g.$image=g.$container.find("img"),g.$viewport.append(g.$container),g.$image.one(b.load,function(){var t,e,i,o,n,a,r;n=(i=t=g).$image,a=n[0],r=new Image,o=void 0!==a.naturalHeight?{naturalHeight:a.naturalHeight,naturalWidth:a.naturalWidth}:"img"===a.tagName.toLowerCase()&&(r.src=a.src,{naturalHeight:r.height,naturalWidth:r.width}),i.naturalHeight=o.naturalHeight,i.naturalWidth=o.naturalWidth,i.ratioHorizontal=i.naturalHeight/i.naturalWidth,i.ratioVertical=i.naturalWidth/i.naturalHeight,i.isWide=i.naturalWidth>i.naturalHeight,c(t),t.containerTop=t.viewportHeight/2,t.containerLeft=t.viewportWidth/2,h(t),t.imageHeight=t.naturalHeight,t.imageWidth=t.naturalWidth,(e=t).imageHeight=e.imageMinHeight,e.imageWidth=e.imageMinWidth,d(t),u(t),f(t),p(t),H(t,{containerTop:t.containerTop,containerLeft:t.containerLeft,imageHeight:t.imageHeight,imageWidth:t.imageWidth,imageTop:t.imageTop,imageLeft:t.imageLeft}),t.isRendering=!0,g.isAnimating=!1,g.$container.fsTransition({property:"opacity"},function(){}),g.$el.removeClass(y.loading),g.$container.fsTouch({pan:!0,scale:!0}).on(b.scaleStart,g,v).on(b.scaleEnd,g,T).on(b.scale,g,W),g.$el.trigger(b.loaded)}).one(b.error,g,i).attr("src",t).addClass(y.image),(g.$image[0].complete||4===g.$image[0].readyState)&&g.$image.trigger(b.load),g.source=t)}function i(t){t.data.$el.trigger(b.error)}function c(t){t.viewportHeight=t.$viewport.outerHeight(),t.viewportWidth=t.$viewport.outerWidth()}function d(t){t.imageHeight<=t.viewportHeight?(t.containerMinTop=t.viewportHeight/2,t.containerMaxTop=t.viewportHeight/2):(t.containerMinTop=t.viewportHeight-t.imageHeight/2,t.containerMaxTop=t.imageHeight/2),t.imageWidth<=t.viewportWidth?(t.containerMinLeft=t.viewportWidth/2,t.containerMaxLeft=t.viewportWidth/2):(t.containerMinLeft=t.viewportWidth-t.imageWidth/2,t.containerMaxLeft=t.imageWidth/2)}function h(t){t.isWide?(t.imageMinWidth=t.viewportWidth,t.imageMinHeight=t.imageMinWidth*t.ratioHorizontal,t.imageMinHeight>t.viewportHeight&&(t.imageMinHeight=t.viewportHeight,t.imageMinWidth=t.imageMinHeight*t.ratioVertical)):(t.imageMinHeight=t.viewportHeight,t.imageMinWidth=t.imageMinHeight*t.ratioVertical,t.imageMinWidth>t.viewportWidth&&(t.imageMinWidth=t.viewportWidth,t.imageMinHeight=t.imageMinWidth*t.ratioHorizontal)),(t.imageMinWidth>t.naturalWidth||t.imageMinHeight>t.naturalHeight)&&(t.imageMinHeight=t.naturalHeight,t.imageMinWidth=t.naturalWidth),t.imageMaxHeight=t.naturalHeight,t.imageMaxWidth=t.naturalWidth}function u(t){t.imageTop=-t.imageHeight/2,t.imageLeft=-t.imageWidth/2}function f(t){t.lastContainerTop=t.containerTop,t.lastContainerLeft=t.containerLeft,t.lastImageHeight=t.imageHeight,t.lastImageWidth=t.imageWidth,t.lastImageTop=t.imageTop,t.lastImageLeft=t.imageLeft}function p(t){t.renderContainerTop=t.lastContainerTop,t.renderContainerLeft=t.lastContainerLeft,t.renderImageTop=t.lastImageTop,t.renderImageLeft=t.lastImageLeft,t.renderImageHeight=t.lastImageHeight,t.renderImageWidth=t.lastImageWidth}function o(t){t.imageHeight<t.imageMinHeight&&(t.imageHeight=t.imageMinHeight),t.imageHeight>t.imageMaxHeight&&(t.imageHeight=t.imageMaxHeight),t.imageWidth<t.imageMinWidth&&(t.imageWidth=t.imageMinWidth),t.imageWidth>t.imageMaxWidth&&(t.imageWidth=t.imageMaxWidth)}function a(t){t.containerTop<t.containerMinTop&&(t.containerTop=t.containerMinTop),t.containerTop>t.containerMaxTop&&(t.containerTop=t.containerMaxTop),t.containerLeft<t.containerMinLeft&&(t.containerLeft=t.containerMinLeft),t.containerLeft>t.containerMaxLeft&&(t.containerLeft=t.containerMaxLeft)}function r(t){var e,i;null===t.tapTimer?t.tapTimer=j.startTimer(t.tapTimer,500,function(){g(t)}):(g(t),i=(e=t).imageHeight>e.imageMinHeight+1,e.isZooming=!0,f(e),p(e),e.imageWidth=i?(e.imageHeight=e.imageMinHeight,e.imageMinWidth):(e.imageHeight=e.imageMaxHeight,e.imageMaxWidth),d(e),a(e),u(e),e.isRendering=!0)}function g(t){j.clearTimer(t.tapTimer),t.tapTimer=null}function H(t,e){if(n.transform){var i=e.imageWidth/t.naturalWidth,o=e.imageHeight/t.naturalHeight;t.$container.css(n.transform,"translate3d("+e.containerLeft+"px, "+e.containerTop+"px, 0)"),t.$image.css(n.transform,"translate3d(-50%, -50%, 0) scale("+i+","+o+")")}else t.$container.css({top:e.containerTop,left:e.containerLeft}),t.$image.css({height:e.imageHeight,width:e.imageWidth,top:e.imageTop,left:e.imageLeft})}function v(t){var e=t.data;r(e),f(e)}function W(t){var e=t.data;g(e),e.isRendering=!1,e.isZooming=!1,e.imageHeight,e.imageMinHeight,e.containerTop=e.lastContainerTop+t.deltaY,e.containerLeft=e.lastContainerLeft+t.deltaX,e.imageHeight=e.lastImageHeight*t.scale,e.imageWidth=e.lastImageWidth*t.scale,d(e),a(e),o(e),u(e),H(e,{containerTop:e.containerTop,containerLeft:e.containerLeft,imageHeight:e.imageHeight,imageWidth:e.imageWidth,imageTop:e.imageTop,imageLeft:e.imageLeft})}function T(t){var e=t.data;e.isZooming||(f(e),p(e),e.isRendering=!0)}function $(t){j.killEvent(t);var e,i,o=s(t.currentTarget),n=t.data;"out"==(o.hasClass(y.control_zoom_out)?"out":"in")?((i=n).keyDownTime=1,i.action="zoom_out"):((e=n).keyDownTime=1,e.action="zoom_in")}function M(t){t.data.action=!1}function e(t){if(t.isRendering){if(t.action){t.keyDownTime+=t.zoomIncrement;var e=("zoom_out"===t.action?-1:1)*Math.round(t.imageWidth*t.keyDownTime-t.imageWidth);e>t.zoomDelta&&(e=t.zoomDelta),t.isWide?(t.imageWidth+=e,t.imageHeight=Math.round(t.imageWidth/t.ratioVertical)):(t.imageHeight+=e,t.imageWidth=Math.round(t.imageHeight/t.ratioHorizontal)),o(t),u(t),d(t),a(t)}t.renderContainerTop+=Math.round((t.containerTop-t.renderContainerTop)*t.zoomEnertia),t.renderContainerLeft+=Math.round((t.containerLeft-t.renderContainerLeft)*t.zoomEnertia),t.renderImageTop+=Math.round((t.imageTop-t.renderImageTop)*t.zoomEnertia),t.renderImageLeft+=Math.round((t.imageLeft-t.renderImageLeft)*t.zoomEnertia),t.renderImageHeight+=Math.round((t.imageHeight-t.renderImageHeight)*t.zoomEnertia),t.renderImageWidth+=Math.round((t.imageWidth-t.renderImageWidth)*t.zoomEnertia),H(t,{containerTop:t.renderContainerTop,containerLeft:t.renderContainerLeft,imageHeight:t.renderImageHeight,imageWidth:t.renderImageWidth,imageTop:t.renderImageTop,imageLeft:t.renderImageLeft})}}function w(t,e){var i;t.isAnimating||(g(t),t.isAnimating=!0,t.isRendering=!1,t.isZooming=!1,(i=t).$container&&i.$container.length&&i.$container.fsTouch("destroy").off(b.scaleStart,v).off(b.scaleEnd,T).off(b.scale,W),t.$container.fsTransition({property:"opacity"},function(){t.isAnimating=!1,t.$container.remove(),"function"==typeof e&&e.call(window,t)}),t.$el.addClass(y.loading))}function _(t){j.killEvent(t);var e=s(t.currentTarget),i=t.data,o=i.index+(e.hasClass(y.control_next)?1:-1);i.isAnimating||(o<0&&(o=0),o>i.total&&(o=i.total),o!==i.index&&(i.index=o,w(i,function(){m(i,i.images[i.index])})),C(i))}function C(t){t.$controlItems.removeClass(y.control_disabled),0===t.index&&t.$controlPrevious.addClass(y.control_disabled),t.index===t.images.length-1&&t.$controlNext.addClass(y.control_disabled)}function L(t){c(t),d(t),h(t),u(t),d(t),a(t),o(t)}var x=n.Plugin("viewer",{widget:!0,defaults:{controls:!0,customClass:"",labels:{count:"of",next:"Next",previous:"Previous",zoom_in:"Zoom In",zoom_out:"Zoom Out"},theme:"fs-light",zoomDelta:100,zoomEnertia:.2,zoomIncrement:.01},classes:["source","wrapper","viewport","container","image","gallery","loading_icon","controls","controls_custom","control","control_previous","control_next","control_zoom_in","control_zoom_out","control_disabled","loading"],events:{loaded:"loaded",ready:"ready"},methods:{_construct:function(t){var e,i="",o=[y.control,y.control_previous].join(" "),n=[y.control,y.control_next].join(" "),a=[y.control,y.control_zoom_in].join(" "),r=[y.control,y.control_zoom_out].join(" ");t.thisClasses=[y.base,y.loading,t.customClass,t.theme],t.images=[],t.source=!1,t.gallery=!1,t.tapTimer=null,t.action=!1,t.isRendering=!1,t.isZooming=!1,t.isAnimating=!1,t.keyDownTime=1,t.$images=this.find("img").addClass(y.source),t.index=0,t.total=t.$images.length-1,t.customControls="object"===s.type(t.controls)&&t.controls.zoom_in&&t.controls.zoom_out,1<t.$images.length&&(t.gallery=!0,t.thisClasses.push(y.gallery),!t.customControls||t.controls.previous&&t.controls.next||(t.customControls=!1));for(var g=0;g<t.$images.length;g++)e=t.$images.eq(g),t.images.push(e.attr("src"));i+='<div class="'+y.wrapper+'">',i+='<div class="'+y.loading_icon+'"></div>',i+='<div class="'+y.viewport+'"></div>',i+="</div>",t.controls&&!t.customControls&&(i+='<div class="'+y.controls+'">',i+='<button type="button" class="'+o+'">'+t.labels.previous+"</button>",i+='<button type="button" class="'+r+'">'+t.labels.zoom_out+"</button>",i+='<button type="button" class="'+a+'">'+t.labels.zoom_in+"</button>",i+='<button type="button" class="'+n+'">'+t.labels.next+"</button>",i+="</div>"),this.addClass(t.thisClasses.join(" ")).prepend(i),t.$wrapper=this.find(I.wrapper),t.$viewport=this.find(I.viewport),t.customControls?(t.$controls=s(t.controls.container).addClass([y.controls,y.controls_custom].join(" ")),t.$controlPrevious=s(t.controls.previous).addClass(o),t.$controlNext=s(t.controls.next).addClass(n),t.$controlZoomIn=s(t.controls.zoom_in).addClass(a),t.$controlZoomOut=s(t.controls.zoom_out).addClass(r)):(t.$controls=this.find(I.controls),t.$controlPrevious=this.find(I.control_previous),t.$controlNext=this.find(I.control_next),t.$controlZoomIn=this.find(I.control_zoom_in),t.$controlZoomOut=this.find(I.control_zoom_out)),t.$controlItems=t.$controlPrevious.add(t.$controlNext),t.$controlZooms=t.$controlZoomIn.add(t.$controlZoomOut),l(),t.$controlItems.on(b.click,t,_),t.$controlZooms.on([b.touchStart,b.mouseDown].join(" "),t,$).on([b.touchEnd,b.mouseUp].join(" "),t,M),m(t,t.images[t.index]),C(t)},_destruct:function(t){t.$wrapper.remove(),t.$image.removeClass(y.source),t.controls&&!t.customControls&&t.$controls.remove(),t.customControls&&(t.$controls.removeClass([y.controls,y.controls_custom].join(" ")),t.$controlItems.off(b.click).removeClass([y.control,y.control_previous,y.control_next].join(" ")),t.$controlZooms.off([b.touchStart,b.mouseDown].join(" ")).off([b.touchStart,b.mouseDown].join(" ")).off([b.touchEnd,b.mouseUp].join(" ")).removeClass([y.control,y.control_zoom_in,y.control_zoom_out].join(" "))),this.removeClass(t.thisClasses.join(" ")).off(b.namespace),l()},_resize:function(){j.iterate.call(E,L)},_raf:function(){j.iterate.call(E,e)},resize:L,load:function(t,e){t.index=0,"string"==typeof e?(t.total=0,t.images=[e],t.gallery=!1,t.$el.removeClass(y.gallery)):(t.total=e.length-1,1<(t.images=e).length&&(t.gallery=!0,t.$el.addClass(y.gallery)),e=t.images[t.index]),w(t,function(){m(t,e)})},unload:function(t){w(t)}}}),z=x.namespace,I=x.classes,y=I.raw,b=x.events,j=x.functions,Z=(n.window,n.$window),E=[];n.Ready(function(){t(),Z.on("scroll",t),n.$body})});